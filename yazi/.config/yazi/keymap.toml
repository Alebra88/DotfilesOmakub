# Yazi Keymap Configuration
# Custom keybindings for yazi file manager

[mgr]
# Navigation
prepend_keymap = [
	{ on = ["<Esc>"], run = "escape",             desc = "Exit visual mode, clear selected, or cancel search" },
	{ on = ["q"],     run = "quit",               desc = "Exit the process" },
	{ on = ["<C-q>"], run = "close",              desc = "Close the current tab, or quit if it's the last tab" },

	# Navigation
	{ on = ["k"], run = "arrow -1", desc = "Move cursor up" },
	{ on = ["j"], run = "arrow 1",  desc = "Move cursor down" },

	{ on = ["K"], run = "arrow -5", desc = "Move cursor up 5 lines" },
	{ on = ["J"], run = "arrow 5",  desc = "Move cursor down 5 lines" },

	{ on = ["h"], run = "leave", desc = "Go back to the parent directory" },
	{ on = ["l"], run = "enter", desc = "Enter the child directory" },

	{ on = ["g", "g"], run = "arrow -99999999", desc = "Move cursor to the top" },
	{ on = ["G"],      run = "arrow 99999999",  desc = "Move cursor to the bottom" },

	# Selection
	{ on = ["<Space>"], run = ["select --state=none", "arrow 1"], desc = "Toggle selection of current file" },
	{ on = ["v"],       run = "visual_mode",                      desc = "Enter visual mode (selection mode)" },
	{ on = ["V"],       run = "visual_mode --unset",              desc = "Enter visual mode (unset mode)" },
	{ on = ["<C-a>"],   run = "select_all --state=true",          desc = "Select all files" },
	{ on = ["<C-r>"],   run = "select_all --state=none",          desc = "Inverse selection of all files" },

	# Operations
	{ on = ["o"],         run = "open",                   desc = "Open the selected files" },
	{ on = ["O"],         run = "open --interactive",     desc = "Open the selected files interactively" },
	{ on = ["<Enter>"],   run = "open",                   desc = "Open the selected files" },
	{ on = ["y"],         run = "yank",                   desc = "Copy the selected files" },
	{ on = ["x"],         run = "yank --cut",             desc = "Cut the selected files" },
	{ on = ["p"],         run = "paste",                  desc = "Paste the files" },
	{ on = ["P"],         run = "paste --force",          desc = "Paste the files (overwrite if exists)" },
	{ on = ["-"],         run = "link",                   desc = "Symlink the absolute path of files" },
	{ on = ["_"],         run = "link --relative",        desc = "Symlink the relative path of files" },
	{ on = ["d"],         run = "remove",                 desc = "Move the files to the trash" },
	{ on = ["D"],         run = "remove --permanently",   desc = "Permanently delete the files" },
	{ on = ["a"],         run = "create",                 desc = "Create a file or directory (ends with / for directories)" },
	{ on = ["r"],         run = "rename",                 desc = "Rename a file or directory" },
	{ on = [";"],         run = "shell",                  desc = "Run a shell command" },
	{ on = [":"],         run = "shell --block",          desc = "Run a shell command (block the UI until finishes)" },
	{ on = ["."],         run = "hidden toggle",          desc = "Toggle the visibility of hidden files" },
	{ on = ["s"],         run = "search fd",              desc = "Search files by name using fd" },
	{ on = ["S"],         run = "search rg",              desc = "Search files by content using ripgrep" },
	{ on = ["<C-s>"],     run = "search none",            desc = "Cancel the ongoing search" },
	{ on = ["z"],         run = "jump zoxide",            desc = "Jump to a directory using zoxide" },
	{ on = ["Z"],         run = "jump fzf",               desc = "Jump to a directory using fzf" },

	# Sorting
	{ on = [",", "a"], run = "sort alphabetical --dir_first",     desc = "Sort alphabetically" },
	{ on = [",", "A"], run = "sort alphabetical --reverse --dir_first", desc = "Sort alphabetically (reverse)" },
	{ on = [",", "c"], run = "sort created --dir_first",          desc = "Sort by creation time" },
	{ on = [",", "C"], run = "sort created --reverse --dir_first", desc = "Sort by creation time (reverse)" },
	{ on = [",", "m"], run = "sort modified --dir_first",         desc = "Sort by modified time" },
	{ on = [",", "M"], run = "sort modified --reverse --dir_first", desc = "Sort by modified time (reverse)" },
	{ on = [",", "n"], run = "sort natural --dir_first",          desc = "Sort naturally" },
	{ on = [",", "N"], run = "sort natural --reverse --dir_first", desc = "Sort naturally (reverse)" },
	{ on = [",", "s"], run = "sort size --dir_first",             desc = "Sort by size" },
	{ on = [",", "S"], run = "sort size --reverse --dir_first",   desc = "Sort by size (reverse)" },

	# Tabs
	{ on = ["t"], run = "tab_create --current", desc = "Create a new tab using the current path" },
	{ on = ["1"], run = "tab_switch 0", desc = "Switch to the first tab" },
	{ on = ["2"], run = "tab_switch 1", desc = "Switch to the second tab" },
	{ on = ["3"], run = "tab_switch 2", desc = "Switch to the third tab" },
	{ on = ["4"], run = "tab_switch 3", desc = "Switch to the fourth tab" },
	{ on = ["5"], run = "tab_switch 4", desc = "Switch to the fifth tab" },
	{ on = ["6"], run = "tab_switch 5", desc = "Switch to the sixth tab" },
	{ on = ["7"], run = "tab_switch 6", desc = "Switch to the seventh tab" },
	{ on = ["8"], run = "tab_switch 7", desc = "Switch to the eighth tab" },
	{ on = ["9"], run = "tab_switch 8", desc = "Switch to the ninth tab" },

	{ on = ["["], run = "tab_switch -1 --relative", desc = "Switch to the previous tab" },
	{ on = ["]"], run = "tab_switch 1 --relative", desc = "Switch to the next tab" },

	{ on = ["{"], run = "tab_swap -1", desc = "Swap the current tab with the previous tab" },
	{ on = ["}"], run = "tab_swap 1", desc = "Swap the current tab with the next tab" },

	# Find
	{ on = ["/"], run = "find --smart", desc = "Find next file" },
	{ on = ["?"], run = "find --previous --smart", desc = "Find previous file" },
	{ on = ["n"], run = "find_arrow", desc = "Go to next found file" },
	{ on = ["N"], run = "find_arrow --previous", desc = "Go to previous found file" },

	# Help
	{ on = ["~"], run = "help", desc = "Open help" },
]

[input]
prepend_keymap = [
	{ on = ["<Esc>"], run = "close", desc = "Cancel input" },
	{ on = ["<Enter>"], run = "close --submit", desc = "Submit the input" },
	{ on = ["<C-c>"], run = "close", desc = "Cancel input" },
]

[completion]
prepend_keymap = [
	{ on = ["<C-q>"],   run = "close",                       desc = "Cancel completion" },
	{ on = ["<Tab>"],   run = "close --submit",              desc = "Submit the completion" },
	{ on = ["<Enter>"], run = ["close --submit", "close_input --submit"], desc = "Submit the completion and input" },

	{ on = ["<Up>"],   run = "arrow -1", desc = "Move cursor up" },
	{ on = ["<Down>"], run = "arrow 1",  desc = "Move cursor down" },
]

[help]
prepend_keymap = [
	{ on = ["<Esc>"], run = "escape", desc = "Clear the filter, or hide the help" },
	{ on = ["q"],     run = "close",  desc = "Exit the process" },

	# Navigation
	{ on = ["k"], run = "arrow -1", desc = "Move cursor up" },
	{ on = ["j"], run = "arrow 1", desc = "Move cursor down" },
]
